<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MMS - New Member</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
<div class="container mt-4">
    <h2>Member Registration Form</h2><br><br>
    <form id="memberForm" action="/dashboard/member_create" method="post" enctype="multipart/form-data">
        <div class="mb-2">
            <b><label for="memberNo" class="form-label">Member No</label></b>
            <input type="text" class="form-control" id="memberNo" name="memberNo" required style="width: 500px;">
        </div>
        <div class="mb-3">
            <b><label for="name" class="form-label">Name</label></b>
            <input type="text" class="form-control" id="name" name="name" required style="width: 800px;">
        </div>
        <div class="mb-3">
            <b><label for="image" class="form-label">Image</label></b>
            <input type="file" class="form-control" id="image" name="image" accept="image/*">
        </div>
        <div class="mb-3">
            <b><label for="address1" class="form-label">Address 1</label></b>
            <textarea class="form-control" id="address1" name="address1" rows="2" required></textarea>
        </div>
        <div class="mb-3">
            <b><label for="address2" class="form-label">Address 2</label></b>
            <textarea class="form-control" id="address2" name="address2" rows="2"></textarea>
        </div>
        <div class="mb-3">
            <b><label for="address3" class="form-label">Address 3</label></b>
            <textarea class="form-control" id="address3" name="address3" rows="2"></textarea>
        </div>
        <div class="mb-3">
            <b><label for="street" class="form-label">Street</label></b>
            <input type="text" class="form-control" id="street" name="street" required>
        </div>
        <div class="row">
            <div class="col-md-6 mb-3">
                <b><label for="dob" class="form-label">DOB</label></b>
                <input type="date" class="form-control" id="dob" name="dob" required>
            </div>
            <div class="col-md-6 mb-3">
                <b><label for="doj" class="form-label">DOJ</label></b>
                <input type="date" class="form-control" id="doj" name="doj" required>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 mb-3">
                <b><label for="tel" class="form-label">Tel</label></b>
                <input type="text" class="form-control" id="tel" name="tel" required pattern="\d{10}" maxlength="10" minlength="10" title="Please enter a valid 10-digit contact number">
            </div>
            <div class="col-md-6 mb-3">
                <b><label for="whatsapp" class="form-label">Whatsapp</label></b>
                <input type="text" class="form-control" id="whatsapp" name="whatsapp" required pattern="\d{10}" maxlength="10" minlength="10" title="Please enter a valid 10-digit contact number">
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 mb-3">
                <b><label for="email" class="form-label">Email</label></b>
                <input type="email" class="form-control" id="email" name="email" required>
            </div>
            <div class="col-md-6 mb-3">
                <b><label for="area" class="form-label">Area</label></b>
                <select class="form-control" id="area" name="areaId" required>
                    <option value="" disabled selected>Select an area</option>
                    <th:block th:each="area : ${areas}">
                        <option th:value="${area.areaNumber}" th:text="${area.areaName}"></option>
                    </th:block>
                </select>
            </div>
        </div>

        <br><hr><br>
        <div class="mb-3">
            <b><label class="form-label">Member Fee</label></b>
        </div>
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="amount" class="form-label">Amount</label>
                <input type="number" class="form-control" id="amount" name="amount" required>
            </div>
            <div class="col-md-6 mb-3">
                <label for="yearMonth" class="form-label">Year-Month</label>
                <input type="month" class="form-control" id="yearMonth" name="yearMonth" required>
            </div>
        </div>
        <br><hr><br>
        <div class="mb-3">
            <b><label class="form-label"></label></b>
            <div class="d-flex align-items-center">
                <label class="form-check-label me-2" for="statusSwitch"><b>Status</b></label>
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="statusSwitch" name="status" value="A">
                </div>
                <label class="form-check-label ms-2" for="statusSwitch"></label>
                <input type="hidden" name="status" value="I">
            </div>
        </div>
        <br>
        <button type="submit" class="btn btn-primary me-2">Submit</button>
        <button type="button" class="btn btn-secondary" onclick="history.back()">Cancel</button><br><br><br><br><br><br>
    </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.getElementById('memberForm');
        const statusSwitch = document.getElementById('statusSwitch');

        form.addEventListener('submit', function () {
            // Ensure the switch value is updated before form submission
            const hiddenStatus = form.querySelector('input[type="hidden"][name="status"]');
            hiddenStatus.disabled = statusSwitch.checked;
        });

        // Optional: Reset form when cancel button is clicked
        const cancelButton = document.querySelector('button[type="button"]');
        cancelButton.addEventListener('click', function () {
            form.reset();
        });
    });
</script>
</body>
</html>
